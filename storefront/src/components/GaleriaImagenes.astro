---
interface Props {
  imagenes?: { url: string; alt?: string }[];
}

const { imagenes = [] } = Astro.props;

// Imagen por defecto si no hay nada
const defaultImage =
  "https://images.unsplash.com/photo-1558981403-c5f9899a28bc?auto=format&fit=crop&q=80&w=800";
const mainImage = imagenes[0]?.url || defaultImage;
---

<div class="flex flex-col md:flex-row gap-4 lg:col-span-7">
  <!-- Thumbnails -->
  <div
    class="order-2 md:order-1 flex md:flex-col gap-3 max-h-[600px] overflow-y-auto custom-scrollbar"
  >
    {
      imagenes.map((img, i) => (
        <button
          class={`w-20 h-20 bg-background-dark border-2 rounded-xl flex-shrink-0 cursor-pointer overflow-hidden transition-all hover:scale-105 active:scale-95 ${i === 0 ? "border-primary" : "border-transparent hover:border-white/10"}`}
        >
          <img
            src={img.url}
            alt={img.alt || `Miniatura ${i + 1}`}
            class="w-full h-full object-cover"
          />
        </button>
      ))
    }

    {/* Placeholder si hay pocas im√°genes */}
    {
      imagenes.length < 4 &&
        [...Array(4 - imagenes.length)].map((_, i) => (
          <div class="w-20 h-20 bg-card-dark/50 border-2 border-transparent rounded-xl flex-shrink-0 opacity-20" />
        ))
    }
  </div>

  <!-- Main Image -->
  <div
    class="order-1 md:order-2 flex-1 bg-card-dark rounded-2xl overflow-hidden aspect-[4/5] md:aspect-auto border border-white/10 group relative"
  >
    <img
      src={mainImage}
      alt="Producto Principal"
      class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"
    />

    <div
      class="absolute top-4 right-4 bg-background-dark/80 backdrop-blur px-4 py-2 rounded-full border border-primary/30 flex items-center gap-2"
    >
      <span class="w-2 h-2 rounded-full bg-primary animate-pulse"></span>
      <span class="text-[10px] font-bold tracking-widest uppercase text-white"
        >Performance Edition</span
      >
    </div>
  </div>
</div>

<style>
  .custom-scrollbar::-webkit-scrollbar {
    width: 4px;
    height: 4px;
  }
  .custom-scrollbar::-webkit-scrollbar-track {
    background: transparent;
  }
  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: var(--color-white/10);
    border-radius: 10px;
  }
</style>


